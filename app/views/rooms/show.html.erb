<% breadcrumb :room, @resource %>

<%= render partial: 'chat_room', locals: { resource: @resource } %>
<%= render partial: 'documents/documents_table', locals: { resource: @resource, documents: @documents } %>

<script>
  // リロードした時にファイル管理にあるメッセージスクロールテーブルを一番最新のメッセージまでスクロールする
  $(document).ready(function(){
    height = $('.scroll-bar')[0].scrollHeight
    $('.scroll-bar').scrollTop(height)
  });

  // テキストエリアを入力し改行した時に自動的に改行する
  $(function() {
    var $textarea = $('textarea.form-control');
    var lineHeight = parseInt($textarea.css('lineHeight'));
    $textarea.on('input', function(e) {
      var lines = ($(this).val() + '\n' + '\n').match(/\n/g).length;
      $(this).height(lineHeight * lines);
    });
  });
</script>
